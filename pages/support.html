<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support - P2P Marketplace</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-store"></i>
                <span>P2P Marketplace</span>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="../index.html" class="nav-link">Home</a>
                <a href="../dashboard.html" class="nav-link">Dashboard</a>
                <a href="browse.html" class="nav-link">Browse</a>
                <a href="seller.html" class="nav-link nav-seller-only">Sell</a>
                <a href="analytics.html" class="nav-link nav-seller-only">Analytics</a>
                <a href="my-listings.html" class="nav-link nav-seller-only">My Listings</a>
                <a href="matching.html" class="nav-link">Smart Match</a>
                <a href="history.html" class="nav-link nav-buyer-only">History</a>
                <a href="support.html" class="nav-link active">Support</a>
                <a href="admin.html" class="nav-link nav-admin-only">Admin</a>
                <div class="nav-user" id="nav-user">
                    <span id="user-email"></span>
                    <button class="btn btn-outline" id="logout-btn">Logout</button>
                </div>
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon" id="theme-icon"></i>
                </button>
            </div>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <main class="support-container">
        <div class="container">
            <div class="support-header">
                <h1>Customer Support</h1>
                <p>We're here to help you with any questions or issues</p>
            </div>

            <!-- Support Ticket Form -->
            <div class="support-ticket-section">
                <div class="section-header">
                    <h2>Create Support Ticket</h2>
                    <p>Submit a ticket and our team will get back to you within 24 hours</p>
                </div>

                <form id="support-form" class="support-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ticket-subject">Subject *</label>
                            <input type="text" id="ticket-subject" name="subject" required maxlength="100"
                                placeholder="Brief description of your issue">
                        </div>

                        <div class="form-group">
                            <label for="ticket-priority">Priority</label>
                            <select id="ticket-priority" name="priority">
                                <option value="low">Low</option>
                                <option value="medium" selected>Medium</option>
                                <option value="high">High</option>
                                <option value="urgent">Urgent</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="ticket-category">Category *</label>
                        <select id="ticket-category" name="category" required>
                            <option value="">Select Category</option>
                            <option value="technical">Technical Issue</option>
                            <option value="billing">Billing & Payment</option>
                            <option value="account">Account Issues</option>
                            <option value="product">Product Questions</option>
                            <option value="matching">Matching Algorithm</option>
                            <option value="feedback">Feedback & Suggestions</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="ticket-description">Description *</label>
                        <textarea id="ticket-description" name="description" required rows="6" maxlength="2000"
                            placeholder="Please provide detailed information about your issue..."></textarea>
                        <small>Maximum 2000 characters</small>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large" id="submit-ticket-btn">
                            <span class="btn-text">
                                <i class="fas fa-paper-plane"></i> Submit Ticket
                            </span>
                            <span class="btn-loading" style="display: none;">
                                <i class="fas fa-spinner fa-spin"></i> Submitting...
                            </span>
                        </button>
                    </div>
                </form>
            </div>

            <!-- My Tickets -->
            <div class="my-tickets-section">
                <div class="section-header">
                    <h2>My Support Tickets</h2>
                    <p>Track the status of your submitted tickets</p>
                </div>

                <div id="tickets-container" class="tickets-container">
                    <div id="tickets-loading" class="loading-spinner">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Loading your tickets...</p>
                    </div>
                    <div id="tickets-list" class="tickets-list">
                        <!-- Tickets will be loaded here -->
                    </div>
                    <div id="no-tickets" class="no-tickets" style="display: none;">
                        <i class="fas fa-ticket-alt"></i>
                        <h3>No support tickets</h3>
                        <p>You haven't submitted any support tickets yet</p>
                    </div>
                </div>
            </div>

            <!-- FAQ Section -->
            <div class="faq-section">
                <div class="section-header">
                    <h2>Frequently Asked Questions</h2>
                    <p>Find quick answers to common questions</p>
                </div>

                <div class="faq-container">
                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>How does the smart matching algorithm work?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Our DSA (Data Structures and Algorithms) based matching system uses a greedy algorithm to
                                analyze your preferences, budget, and keywords to find the best product matches. It
                                considers factors like keyword relevance, price optimization, seller ratings, and
                                product condition.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>How do I contact a seller?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Click on the "Contact Seller" button on any product listing or match result. This will
                                open a secure messaging system where you can communicate directly with the seller about
                                the product.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>What payment methods are accepted?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>We support various payment methods including credit cards, PayPal, and bank transfers.
                                Payment processing is handled securely through our integrated payment gateway.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>How do I leave feedback for a seller?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>After completing a transaction, you can leave feedback by visiting the seller's profile
                                or the product listing. Rate the seller from 1-5 stars and provide written feedback
                                about your experience.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h3>What if I have a dispute with a seller?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>If you encounter any issues with a seller, please contact our support team immediately.
                                We have a dispute resolution process in place to help resolve conflicts fairly and
                                quickly.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Ticket Details Modal -->
    <div id="ticket-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="ticket-modal-content">
                <!-- Ticket details will be loaded here -->
            </div>
        </div>
    </div>

    <script src="../js/theme.js"></script>
    <script type="module" src="../js/firebase.js"></script>
    <script type="module" src="../js/app.js"></script>
    <script type="module" src="../js/support.js"></script>
</body>

</html>
